<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elena & Art — Наши работы</title>

  <style>
    :root{
      --maxw: 1180px;

      /* Позиции кнопок (если надо подвигать) */
      --back-top: 26px;
      --back-left: 24px;          /* кнопка "Назад" */
      --lang-top: 22px;
      --lang-right: 20px;         /* больше = уходит левее */

      /* Размеры карточек */
      --gap: 18px;
      --radius: 18px;
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: Georgia, "Times New Roman", serif;
      color: rgba(30,26,22,.88);

      /* фон страницы */
      background: url("images/background.jpg") center/cover no-repeat fixed;
    }

    /* На телефонах fixed фон часто лагает */
    @media (max-width: 980px){
      body{ background-attachment: scroll; }
    }

    /* Лёгкая “дымка” для читабельности */
    .veil{
      min-height: 100vh;
      background: linear-gradient(
        to bottom,
        rgba(255,255,255,.15),
        rgba(255,255,255,.20) 40%,
        rgba(255,255,255,.12)
      );
    }

    /* Кнопка Назад */
    .back{
      position: fixed;
      top: var(--back-top);
      left: var(--back-left);
      z-index: 50;

      display:inline-flex;
      align-items:center;
      gap:10px;

      padding: 10px 14px;
      border-radius: 999px;

      text-decoration:none;
      color: rgba(30,26,22,.88);

      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);

      font-weight: 700;
      backdrop-filter: blur(6px);
    }
    .back:hover{ background: rgba(255,255,255,.68); }

    /* Переключатель языков */
    .lang{
      position: fixed;
      top: var(--lang-top);
      right: var(--lang-right);
      z-index: 50;

      display:flex;
      gap:10px;
      align-items:center;
    }
    .lang button{
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.55);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
      cursor:pointer;
      font-weight: 800;
      color: rgba(30,26,22,.82);
      backdrop-filter: blur(6px);
    }
    .lang button.active{
      background: rgba(255,255,255,.85);
      border-color: rgba(0,0,0,.16);
    }

    /* Контент */
    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 92px 18px 80px; /* сверху место под кнопки */
    }

    h1{
      margin: 10px 0 6px;
      font-size: 56px;
      line-height: 1.05;
      letter-spacing: .2px;
    }

    .count{
      margin: 0 0 18px;
      font-size: 16px;
      color: rgba(30,26,22,.65);
    }

    /* Сетка */
    .grid{
      display: grid;
      gap: var(--gap);
      grid-template-columns: repeat(4, minmax(0, 1fr));
      align-items: start;
    }

    .tile{
      width: 100%;
      aspect-ratio: 1 / 1;        /* КВАДРАТ */
      border-radius: var(--radius);
      overflow: hidden;
      background: rgba(255,255,255,.28);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 14px 36px rgba(0,0,0,.12);
      cursor: pointer;
      position: relative;
    }

    .tile img{
      width: 100%;
      height: 100%;
      display:block;
      object-fit: cover;
      transform: scale(1.02);
    }

    /* адаптив */
    @media (max-width: 1100px){
      .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
      h1{ font-size: 48px; }
    }
    @media (max-width: 780px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      h1{ font-size: 40px; }
    }
    @media (max-width: 460px){
      .grid{ grid-template-columns: 1fr; }
      h1{ font-size: 34px; }
    }

    /* Lightbox */
    .lb{
      position: fixed;
      inset: 0;
      display: none;
      z-index: 999;

      background: rgba(0,0,0,.74);
      backdrop-filter: blur(4px);
    }
    .lb.open{ display: block; }

    .lb-inner{
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      padding: 22px;
    }

    .lb-img{
      max-width: min(1100px, 92vw);
      max-height: 86vh;
      border-radius: 18px;
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      background: rgba(255,255,255,.08);
    }

    .lb-btn{
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.92);
      cursor: pointer;
      display: grid;
      place-items: center;
      font-size: 26px;
      user-select: none;
    }
    .lb-btn:hover{ background: rgba(0,0,0,.38); }

    .lb-prev{ left: 18px; }
    .lb-next{ right: 18px; }

    .lb-close{
      position: absolute;
      top: 18px;
      right: 18px;
      transform: none;
      font-size: 22px;
    }

    .hint{
      position:absolute;
      bottom: 14px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255,255,255,.75);
      font-size: 13px;
      text-align:center;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.14);
    }
  </style>
</head>

<body>
  <div class="veil">
    <!-- Назад -->
    <a class="back" href="about.html" data-ru="← Назад" data-sk="← Späť">← Назад</a>

    <!-- Язык -->
    <div class="lang" aria-label="Language switch">
      <button type="button" id="btn-ru" class="active" aria-pressed="true">RU</button>
      <button type="button" id="btn-sk" aria-pressed="false">SK</button>
    </div>

    <main class="wrap">
      <h1 id="title" data-ru="Наши работы" data-sk="Naše práce">Наши работы</h1>

      <p class="count" id="count" data-ru="Загрузка…" data-sk="Načítava sa…">Загрузка…</p>

      <section class="grid" id="grid" aria-label="Gallery"></section>
    </main>
  </div>

  <!-- Lightbox -->
  <div class="lb" id="lb" aria-hidden="true">
    <div class="lb-inner" id="lbInner">
      <button class="lb-btn lb-prev" id="prev" aria-label="Prev">‹</button>
      <img class="lb-img" id="lbImg" alt="" />
      <button class="lb-btn lb-next" id="next" aria-label="Next">›</button>
      <button class="lb-btn lb-close" id="close" aria-label="Close">✕</button>
      <div class="hint" data-ru="Esc — закрыть · ←/→ — листать" data-sk="Esc — zatvoriť · ←/→ — listovať">
        Esc — закрыть · ←/→ — листать
      </div>
    </div>
  </div>

  <script>
    // ====== НАСТРОЙКА: максимум фото (если файлов меньше — лишнее просто не появится) ======
    const MAX_IMAGES = 174;

    // Папка с фото:
    // images/gallery-works/work01.jpg ... work174.jpg
    const FOLDER = "images/gallery-works/";

    function pad2(n){ return String(n).padStart(2,'0'); }

    // Планируемые пути (могут не существовать — это ок)
    const planned = [];
    for(let i=1;i<=MAX_IMAGES;i++){
      planned.push(`${FOLDER}work${pad2(i)}.jpg`);
    }

    // Реально существующие (только они попадут в сетку и lightbox)
    const existing = [];

    const grid = document.getElementById("grid");
    const countEl = document.getElementById("count");

    // ====== Lightbox элементы ======
    const lb = document.getElementById("lb");
    const lbImg = document.getElementById("lbImg");
    const btnPrev = document.getElementById("prev");
    const btnNext = document.getElementById("next");
    const btnClose = document.getElementById("close");
    const lbInner = document.getElementById("lbInner");
    let current = 0;

    function updateCount(){
      const n = existing.length;
      const lang = document.documentElement.lang === "sk" ? "sk" : "ru";
      countEl.textContent = (lang === "sk") ? `${n} fotiek` : `${n} фото`;
    }

    function openLB(i){
      if(existing.length === 0) return;
      current = i;
      lbImg.src = existing[current];
      lb.classList.add("open");
      lb.setAttribute("aria-hidden", "false");
    }

    function closeLB(){
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden", "true");
      lbImg.src = "";
    }

    function prev(){
      if(existing.length === 0) return;
      current = (current - 1 + existing.length) % existing.length;
      lbImg.src = existing[current];
    }

    function next(){
      if(existing.length === 0) return;
      current = (current + 1) % existing.length;
      lbImg.src = existing[current];
    }

    btnPrev.addEventListener("click", (e)=>{ e.stopPropagation(); prev(); });
    btnNext.addEventListener("click", (e)=>{ e.stopPropagation(); next(); });
    btnClose.addEventListener("click", (e)=>{ e.stopPropagation(); closeLB(); });

    lb.addEventListener("click", closeLB);
    lbInner.addEventListener("click", (e)=> e.stopPropagation());

    document.addEventListener("keydown", (e)=>{
      if(!lb.classList.contains("open")) return;
      if(e.key === "Escape") closeLB();
      if(e.key === "ArrowLeft") prev();
      if(e.key === "ArrowRight") next();
    });

    // ====== Языки (с сохранением) ======
    const btnRU = document.getElementById("btn-ru");
    const btnSK = document.getElementById("btn-sk");

    function setLang(lang){
      document.documentElement.lang = lang;

      document.querySelectorAll("[data-ru][data-sk]").forEach(el=>{
        el.textContent = (lang === "sk") ? el.dataset.sk : el.dataset.ru;
      });

      btnRU.classList.toggle("active", lang === "ru");
      btnSK.classList.toggle("active", lang === "sk");
      btnRU.setAttribute("aria-pressed", String(lang === "ru"));
      btnSK.setAttribute("aria-pressed", String(lang === "sk"));

      localStorage.setItem("lang", lang);

      // обновить счетчик в правильной локали
      updateCount();
    }

    btnRU.addEventListener("click", ()=> setLang("ru"));
    btnSK.addEventListener("click", ()=> setLang("sk"));

    // ====== Рендер: добавляем только существующие изображения (без "дыр") ======
    function addImage(src){
      const idx = existing.length;
      existing.push(src);

      const card = document.createElement("div");
      card.className = "tile";
      card.dataset.index = idx;

      const el = document.createElement("img");
      el.src = src;
      el.alt = `work ${idx + 1}`;
      el.loading = "lazy";
      el.decoding = "async";

      card.appendChild(el);
      card.addEventListener("click", () => openLB(idx));
      grid.appendChild(card);

      updateCount();
    }

    // Идём по списку, проверяем загрузкой; успешные — добавляем
    planned.forEach((src) => {
      const probe = new Image();
      probe.src = src;
      probe.onload = () => addImage(src);
      // onerror — молча пропускаем
    });

    // ====== стартовый язык из localStorage ======
    const saved = localStorage.getItem("lang");
    setLang(saved === "sk" ? "sk" : "ru");
  </script>
</body>
</html>
